{"ast":null,"code":"/**\r\n * Admin Dashboard Page â€” Metrics, application overview, charts\r\n */import React,{useEffect,useState}from'react';import{useAuth}from'../contexts/AuthContext';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:4001/api/v1';const AdminDashboard=()=>{const{token}=useAuth();const[metrics,setMetrics]=useState(null);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchMetrics=async()=>{if(!token){setError('Please login to access admin dashboard');setLoading(false);return;}try{const response=await fetch(\"\".concat(API_URL,\"/admin/metrics\"),{headers:{'Authorization':\"Bearer \".concat(token)}});if(!response.ok)throw new Error('Failed to fetch metrics');const data=await response.json();setMetrics(data);}catch(err){console.error(err);setError('Failed to load metrics');// Set demo data for offline\nsetMetrics({overview:{total_users:127,total_profiles:104,total_applications:89,total_documents:213,recent_applications_7d:23,avg_farmer_income:165000},applications_by_status:{SUBMITTED:34,RECEIVED:22,UNDER_REVIEW:18,APPROVED:12,REJECTED:3},top_states:[{state:'Maharashtra',count:42},{state:'Gujarat',count:23},{state:'Madhya Pradesh',count:18},{state:'Rajasthan',count:12},{state:'Karnataka',count:9}],top_schemes:[{scheme:'PM-KISAN Samman Nidhi',count:34},{scheme:'PM Fasal Bima Yojana',count:22},{scheme:'Kisan Credit Card',count:18},{scheme:'Soil Health Card',count:9},{scheme:'PM Krishi Sinchai Yojana',count:6}]});}finally{setLoading(false);}};fetchMetrics();},[token]);if(loading)return/*#__PURE__*/_jsx(LoadingSpinner,{});if(!metrics)return/*#__PURE__*/_jsx(\"div\",{className:\"max-w-4xl mx-auto px-4 py-8\",children:/*#__PURE__*/_jsx(\"p\",{className:\"text-red-600\",children:error})});const statusColors={SUBMITTED:'bg-blue-100 text-blue-800',RECEIVED:'bg-yellow-100 text-yellow-800',UNDER_REVIEW:'bg-purple-100 text-purple-800',APPROVED:'bg-green-100 text-green-800',REJECTED:'bg-red-100 text-red-800'};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-6xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-gray-900 mb-6\",children:\"\\uD83D\\uDCCA Admin Dashboard\"}),error&&/*#__PURE__*/_jsxs(\"div\",{className:\"bg-yellow-50 border border-yellow-200 rounded-lg p-3 mb-4 text-sm text-yellow-800\",children:[\"\\u26A0\\uFE0F Showing demo data \\u2014 \",error]}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 md:grid-cols-3 gap-4 mb-8\",children:[{label:'Total Users',value:metrics.overview.total_users,icon:'ðŸ‘¥'},{label:'Profiles Created',value:metrics.overview.total_profiles,icon:'ðŸ“'},{label:'Applications',value:metrics.overview.total_applications,icon:'ðŸ“„'},{label:'Documents Uploaded',value:metrics.overview.total_documents,icon:'ðŸ—‚ï¸'},{label:'Last 7 Days',value:metrics.overview.recent_applications_7d,icon:'ðŸ“ˆ'},{label:'Avg Income',value:\"\\u20B9\".concat(metrics.overview.avg_farmer_income.toLocaleString('en-IN')),icon:'ðŸ’°'}].map((card,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-primary-500\",children:[/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm text-gray-500\",children:[card.icon,\" \",card.label]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-2xl font-bold text-gray-900 mt-1\",children:card.value})]},i))}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid md:grid-cols-2 gap-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Applications by Status\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:Object.entries(metrics.applications_by_status).map(_ref=>{let[status,count]=_ref;const total=metrics.overview.total_applications||1;const pct=Math.round(count/total*100);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-1\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-xs font-semibold px-2 py-1 rounded-full \".concat(statusColors[status]||'bg-gray-100 text-gray-800'),children:status}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm text-gray-600\",children:[count,\" (\",pct,\"%)\"]})]}),/*#__PURE__*/_jsx(\"div\",{className:\"w-full bg-gray-100 rounded-full h-2\",children:/*#__PURE__*/_jsx(\"div\",{className:\"bg-primary-500 h-2 rounded-full\",style:{width:\"\".concat(pct,\"%\")}})})]},status);})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Top States\"}),/*#__PURE__*/_jsx(\"div\",{className:\"space-y-3\",children:metrics.top_states.map((s,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-medium w-6 text-center text-gray-400\",children:[\"#\",i+1]}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-900\",children:s.state})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"text-sm font-semibold text-primary-600\",children:[s.count,\" farmers\"]})]},i))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 md:col-span-2\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Most Applied Schemes\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid md:grid-cols-2 gap-4\",children:metrics.top_schemes.map((s,i)=>/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center gap-3 p-3 bg-gray-50 rounded-lg\",children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-2xl font-bold text-primary-500\",children:[\"#\",i+1]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-sm font-medium text-gray-900\",children:s.scheme}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-xs text-gray-500\",children:[s.count,\" applications\"]})]})]},i))})]})]})]});};export default AdminDashboard;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}