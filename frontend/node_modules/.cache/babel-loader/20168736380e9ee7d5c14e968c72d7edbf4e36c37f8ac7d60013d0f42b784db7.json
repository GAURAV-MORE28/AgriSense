{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\gmore\\\\OneDrive\\\\Desktop\\\\Gaurav\\\\krishi-ai\\\\frontend\\\\src\\\\components\\\\VoiceInput.tsx\",\n  _s = $RefreshSig$();\n/**\r\n * VoiceInput Component - Speech-to-text input using Web Speech API\r\n */\n\nimport React, { useState, useCallback } from 'react';\nimport { useTranslation } from 'react-i18next';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst VoiceInput = ({\n  onResult,\n  language\n}) => {\n  _s();\n  const {\n    t,\n    i18n\n  } = useTranslation();\n  const [isListening, setIsListening] = useState(false);\n  const [isSupported] = useState(() => {\n    return 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;\n  });\n  const getLanguageCode = useCallback(() => {\n    const langMap = {\n      en: 'en-IN',\n      hi: 'hi-IN',\n      mr: 'mr-IN'\n    };\n    return language || langMap[i18n.language] || 'en-IN';\n  }, [language, i18n.language]);\n  const startListening = useCallback(() => {\n    if (!isSupported) {\n      alert('Speech recognition is not supported in your browser');\n      return;\n    }\n    const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;\n    if (!SpeechRecognition) return;\n    const recognition = new SpeechRecognition();\n    recognition.lang = getLanguageCode();\n    recognition.interimResults = false;\n    recognition.maxAlternatives = 1;\n    recognition.onstart = () => {\n      setIsListening(true);\n    };\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      onResult(transcript);\n      setIsListening(false);\n    };\n    recognition.onerror = event => {\n      console.error('Speech recognition error:', event.error);\n      setIsListening(false);\n    };\n    recognition.onend = () => {\n      setIsListening(false);\n    };\n    recognition.start();\n  }, [isSupported, getLanguageCode, onResult]);\n  if (!isSupported) {\n    return null;\n  }\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    type: \"button\",\n    onClick: startListening,\n    disabled: isListening,\n    className: `btn-voice relative ${isListening ? 'listening voice-pulse' : ''}`,\n    \"aria-label\": isListening ? t('profile.listening') : t('profile.speakButton'),\n    children: isListening ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"animate-pulse\",\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 80,\n        columnNumber: 11\n      }, this), t('profile.listening')]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        children: \"\\uD83C\\uDFA4\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 11\n      }, this), t('profile.speakButton')]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 71,\n    columnNumber: 5\n  }, this);\n};\n_s(VoiceInput, \"zIUVdKM6vWrV5y+Vq//6YvxMvG4=\", false, function () {\n  return [useTranslation];\n});\n_c = VoiceInput;\nexport default VoiceInput;\nvar _c;\n$RefreshReg$(_c, \"VoiceInput\");","map":{"version":3,"names":["React","useState","useCallback","useTranslation","jsxDEV","_jsxDEV","Fragment","_Fragment","VoiceInput","onResult","language","_s","t","i18n","isListening","setIsListening","isSupported","window","getLanguageCode","langMap","en","hi","mr","startListening","alert","SpeechRecognition","webkitSpeechRecognition","recognition","lang","interimResults","maxAlternatives","onstart","onresult","event","transcript","results","onerror","console","error","onend","start","type","onClick","disabled","className","children","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/gmore/OneDrive/Desktop/Gaurav/krishi-ai/frontend/src/components/VoiceInput.tsx"],"sourcesContent":["/**\r\n * VoiceInput Component - Speech-to-text input using Web Speech API\r\n */\r\n\r\nimport React, { useState, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface VoiceInputProps {\r\n  onResult: (text: string) => void;\r\n  language?: string;\r\n}\r\n\r\nconst VoiceInput: React.FC<VoiceInputProps> = ({ onResult, language }) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSupported] = useState(() => {\r\n    return 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;\r\n  });\r\n\r\n  const getLanguageCode = useCallback(() => {\r\n    const langMap: Record<string, string> = {\r\n      en: 'en-IN',\r\n      hi: 'hi-IN',\r\n      mr: 'mr-IN'\r\n    };\r\n    return language || langMap[i18n.language] || 'en-IN';\r\n  }, [language, i18n.language]);\r\n\r\n  const startListening = useCallback(() => {\r\n    if (!isSupported) {\r\n      alert('Speech recognition is not supported in your browser');\r\n      return;\r\n    }\r\n\r\n    const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n\r\n    if (!SpeechRecognition) return;\r\n\r\n    const recognition = new SpeechRecognition();\r\n    recognition.lang = getLanguageCode();\r\n    recognition.interimResults = false;\r\n    recognition.maxAlternatives = 1;\r\n\r\n    recognition.onstart = () => {\r\n      setIsListening(true);\r\n    };\r\n\r\n    recognition.onresult = (event: any) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      onResult(transcript);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onerror = (event: any) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.start();\r\n  }, [isSupported, getLanguageCode, onResult]);\r\n\r\n  if (!isSupported) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={startListening}\r\n      disabled={isListening}\r\n      className={`btn-voice relative ${isListening ? 'listening voice-pulse' : ''}`}\r\n      aria-label={isListening ? t('profile.listening') : t('profile.speakButton')}\r\n    >\r\n      {isListening ? (\r\n        <>\r\n          <span className=\"animate-pulse\">ðŸŽ¤</span>\r\n          {t('profile.listening')}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span>ðŸŽ¤</span>\r\n          {t('profile.speakButton')}\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default VoiceInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}