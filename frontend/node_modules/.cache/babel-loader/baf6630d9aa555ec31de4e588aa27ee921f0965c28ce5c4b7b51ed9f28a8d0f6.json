{"ast":null,"code":"import React,{useState,useRef}from'react';import{useTranslation}from'react-i18next';import axios from'axios';import{useAuth}from'../contexts/AuthContext';import LoadingSpinner from'../components/LoadingSpinner';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const API_URL=process.env.REACT_APP_API_URL||'http://localhost:4001/api/v1';const DocumentUpload=()=>{const{t}=useTranslation();const fileInputRef=useRef(null);const{token}=useAuth();const[uploading,setUploading]=useState(false);const[documents,setDocuments]=useState([]);const[error,setError]=useState(null);const handleFileSelect=async e=>{const files=e.target.files;if(!(files!==null&&files!==void 0&&files.length))return;if(!token){setError(\"Please login to upload documents\");return;}setUploading(true);setError(null);const formData=new FormData();formData.append('file',files[0]);formData.append('doc_type_hint','aadhaar');// Hint for demo purposes\ntry{const res=await axios.post(\"\".concat(API_URL,\"/documents/upload\"),formData,{headers:{'Content-Type':'multipart/form-data','Authorization':\"Bearer \".concat(token)}});setDocuments(prev=>[...prev,res.data]);}catch(err){console.error('Upload failed',err);setError('Document upload failed. Please try again.');}finally{setUploading(false);if(fileInputRef.current)fileInputRef.current.value='';}};return/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-2xl mx-auto px-4 py-8\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-6\",children:t('documents.title')||'Document Upload'}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"p-4 mb-4 text-red-700 bg-red-100 rounded-lg\",children:error}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-6 mb-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"text-center py-8 border-2 border-dashed border-gray-300 rounded-lg mb-6\",children:[/*#__PURE__*/_jsx(\"span\",{className:\"text-4xl mb-4 block\",children:\"\\uD83D\\uDCC4\"}),/*#__PURE__*/_jsx(\"p\",{className:\"text-gray-600 mb-4\",children:t('documents.upload')||'Upload Aadhaar or Land Record'}),/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center gap-4\",children:/*#__PURE__*/_jsx(\"button\",{onClick:()=>{var _fileInputRef$current;return(_fileInputRef$current=fileInputRef.current)===null||_fileInputRef$current===void 0?void 0:_fileInputRef$current.click();},className:\"btn-primary\",disabled:uploading,children:uploading?/*#__PURE__*/_jsxs(\"span\",{className:\"flex items-center gap-2\",children:[/*#__PURE__*/_jsx(LoadingSpinner,{size:\"sm\"}),\" Processing OCR...\"]}):t('documents.file')||'Select File'})}),/*#__PURE__*/_jsx(\"input\",{ref:fileInputRef,type:\"file\",accept:\"image/*,.pdf\",onChange:handleFileSelect,className:\"hidden\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"bg-blue-50 p-4 rounded-lg text-sm text-blue-800\",children:[\"\\u2139\\uFE0F \",/*#__PURE__*/_jsx(\"strong\",{children:\"Tip:\"}),\" Upload a clear image of your Aadhaar card or 7/12 extract. Our AI will automatically extract your details.\"]})]}),documents.length>0&&/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-4\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold mb-4\",children:\"Processed Documents\"}),documents.map((doc,idx)=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white rounded-lg shadow p-4 border-l-4 border-green-500\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-start mb-2\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{className:\"font-semibold text-gray-900\",children:doc.filename}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs text-gray-500 uppercase\",children:doc.doc_type_guess})]}),/*#__PURE__*/_jsxs(\"span\",{className:\"bg-green-100 text-green-800 text-xs px-2 py-1 rounded-full font-bold\",children:[\"OCR Confidence: \",(doc.ocr_confidence*100).toFixed(0),\"%\"]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"mt-3 bg-gray-50 p-3 rounded\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"text-xs text-gray-500 mb-2 font-semibold uppercase\",children:\"Extracted Data:\"}),/*#__PURE__*/_jsx(\"div\",{className:\"grid grid-cols-2 gap-2 text-sm\",children:Object.entries(doc.fields||{}).map(_ref=>{let[key,value]=_ref;return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"span\",{className:\"text-gray-500 capitalize\",children:[key.replace('_',' '),\":\"]}),/*#__PURE__*/_jsx(\"span\",{className:\"ml-1 font-medium text-gray-900 truncate block\",children:String(value)})]},key);})})]}),/*#__PURE__*/_jsx(\"div\",{className:\"mt-3 flex justify-end\",children:/*#__PURE__*/_jsx(\"button\",{className:\"text-primary-600 text-sm font-medium hover:underline\",children:\"Verify & Edit\"})})]},idx))]})]});};export default DocumentUpload;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}