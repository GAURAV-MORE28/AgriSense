{"ast":null,"code":"/**\r\n * VoiceInput Component - Speech-to-text input using Web Speech API\r\n */import React,{useState,useCallback}from'react';import{useTranslation}from'react-i18next';import{jsx as _jsx,Fragment as _Fragment,jsxs as _jsxs}from\"react/jsx-runtime\";const VoiceInput=_ref=>{let{onResult,language}=_ref;const{t,i18n}=useTranslation();const[isListening,setIsListening]=useState(false);const[isSupported]=useState(()=>{return'webkitSpeechRecognition'in window||'SpeechRecognition'in window;});const getLanguageCode=useCallback(()=>{const langMap={en:'en-IN',hi:'hi-IN',mr:'mr-IN'};return language||langMap[i18n.language]||'en-IN';},[language,i18n.language]);const startListening=useCallback(()=>{if(!isSupported){alert('Speech recognition is not supported in your browser');return;}const SpeechRecognition=window.SpeechRecognition||window.webkitSpeechRecognition;if(!SpeechRecognition)return;const recognition=new SpeechRecognition();recognition.lang=getLanguageCode();recognition.interimResults=false;recognition.maxAlternatives=1;recognition.onstart=()=>{setIsListening(true);};recognition.onresult=event=>{const transcript=event.results[0][0].transcript;onResult(transcript);setIsListening(false);};recognition.onerror=event=>{console.error('Speech recognition error:',event.error);setIsListening(false);};recognition.onend=()=>{setIsListening(false);};recognition.start();},[isSupported,getLanguageCode,onResult]);if(!isSupported){return null;}return/*#__PURE__*/_jsx(\"button\",{type:\"button\",onClick:startListening,disabled:isListening,className:\"btn-voice relative \".concat(isListening?'listening voice-pulse':''),\"aria-label\":isListening?t('profile.listening'):t('profile.speakButton'),children:isListening?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"animate-pulse\",children:\"\\uD83C\\uDFA4\"}),t('profile.listening')]}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{children:\"\\uD83C\\uDFA4\"}),t('profile.speakButton')]})});};export default VoiceInput;","map":{"version":3,"names":["React","useState","useCallback","useTranslation","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","VoiceInput","_ref","onResult","language","t","i18n","isListening","setIsListening","isSupported","window","getLanguageCode","langMap","en","hi","mr","startListening","alert","SpeechRecognition","webkitSpeechRecognition","recognition","lang","interimResults","maxAlternatives","onstart","onresult","event","transcript","results","onerror","console","error","onend","start","type","onClick","disabled","className","concat","children"],"sources":["C:/Users/gmore/OneDrive/Desktop/Gaurav/krishi-ai/frontend/src/components/VoiceInput.tsx"],"sourcesContent":["/**\r\n * VoiceInput Component - Speech-to-text input using Web Speech API\r\n */\r\n\r\nimport React, { useState, useCallback } from 'react';\r\nimport { useTranslation } from 'react-i18next';\r\n\r\ninterface VoiceInputProps {\r\n  onResult: (text: string) => void;\r\n  language?: string;\r\n}\r\n\r\nconst VoiceInput: React.FC<VoiceInputProps> = ({ onResult, language }) => {\r\n  const { t, i18n } = useTranslation();\r\n  const [isListening, setIsListening] = useState(false);\r\n  const [isSupported] = useState(() => {\r\n    return 'webkitSpeechRecognition' in window || 'SpeechRecognition' in window;\r\n  });\r\n\r\n  const getLanguageCode = useCallback(() => {\r\n    const langMap: Record<string, string> = {\r\n      en: 'en-IN',\r\n      hi: 'hi-IN',\r\n      mr: 'mr-IN'\r\n    };\r\n    return language || langMap[i18n.language] || 'en-IN';\r\n  }, [language, i18n.language]);\r\n\r\n  const startListening = useCallback(() => {\r\n    if (!isSupported) {\r\n      alert('Speech recognition is not supported in your browser');\r\n      return;\r\n    }\r\n\r\n    const SpeechRecognition = (window as any).SpeechRecognition || (window as any).webkitSpeechRecognition;\r\n\r\n    if (!SpeechRecognition) return;\r\n\r\n    const recognition = new SpeechRecognition();\r\n    recognition.lang = getLanguageCode();\r\n    recognition.interimResults = false;\r\n    recognition.maxAlternatives = 1;\r\n\r\n    recognition.onstart = () => {\r\n      setIsListening(true);\r\n    };\r\n\r\n    recognition.onresult = (event: any) => {\r\n      const transcript = event.results[0][0].transcript;\r\n      onResult(transcript);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onerror = (event: any) => {\r\n      console.error('Speech recognition error:', event.error);\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.onend = () => {\r\n      setIsListening(false);\r\n    };\r\n\r\n    recognition.start();\r\n  }, [isSupported, getLanguageCode, onResult]);\r\n\r\n  if (!isSupported) {\r\n    return null;\r\n  }\r\n\r\n  return (\r\n    <button\r\n      type=\"button\"\r\n      onClick={startListening}\r\n      disabled={isListening}\r\n      className={`btn-voice relative ${isListening ? 'listening voice-pulse' : ''}`}\r\n      aria-label={isListening ? t('profile.listening') : t('profile.speakButton')}\r\n    >\r\n      {isListening ? (\r\n        <>\r\n          <span className=\"animate-pulse\">ðŸŽ¤</span>\r\n          {t('profile.listening')}\r\n        </>\r\n      ) : (\r\n        <>\r\n          <span>ðŸŽ¤</span>\r\n          {t('profile.speakButton')}\r\n        </>\r\n      )}\r\n    </button>\r\n  );\r\n};\r\n\r\nexport default VoiceInput;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}